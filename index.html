<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kromia Tech - Card Maker</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700;900&family=Plus+Jakarta+Sans:wght@300;400;600;800&family=Montserrat:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- QR Code -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>

    <!-- Styling -->
    <style>
        :root {
            /* Theme: Kromia (Deep Ocean) */
            --bg-dark: #020617;
            --accent-gold: #0ea5e9;
            /* Replaced Gold with Kromia Blue */
            --accent-cyan: #22D3EE;
            --accent-silver: #94A3B8;
            --panel-bg: #ffffff;
            --body-bg: #f1f5f9;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--body-bg);
            font-family: 'Montserrat', sans-serif;
            color: #334155;
            min-height: 100vh;
        }

        /* --- LAYOUT --- */
        .app-container {
            display: flex;
            height: 100vh;
            flex-direction: row;
        }

        /* Sidebar / Form Area */
        .sidebar {
            width: 400px;
            background: var(--panel-bg);
            padding: 2.5rem;
            display: flex;
            flex-direction: column;
            gap: 2rem;
            overflow-y: auto;
            box-shadow: 10px 0 30px rgba(0, 0, 0, 0.03);
            z-index: 20;
        }

        /* Preview Area */
        .preview-area {
            flex: 1;
            padding: 3rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: #e2e8f0;
            position: relative;
        }

        /* --- COMPONENTS --- */
        .brand-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 800;
            font-size: 1.2rem;
            color: var(--bg-dark);
            text-transform: uppercase;
            margin-bottom: 1rem;
        }

        .section-title {
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #94a3b8;
            margin-bottom: 1rem;
            display: block;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 1.5rem;
        }

        label {
            font-size: 0.85rem;
            font-weight: 600;
            color: #64748b;
        }

        input {
            padding: 12px 16px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 0.95rem;
            font-family: inherit;
            transition: 0.2s;
        }

        input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
        }

        /* Logo Selector */
        .selector-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .select-btn {
            padding: 12px;
            border: 2px solid #e2e8f0;
            background: #f8fafc;
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
            transition: 0.3s;
        }

        .select-btn:hover {
            border-color: #cbd5e1;
        }

        .select-btn.active {
            border-color: #3b82f6;
            background: #eff6ff;
            color: #1e40af;
        }

        .select-btn i {
            font-size: 1.2rem;
            display: block;
            margin-bottom: 6px;
        }

        .select-btn span {
            font-size: 0.65rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        /* Action Buttons */
        .actions {
            margin-top: auto;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .btn {
            padding: 14px;
            border-radius: 10px;
            font-weight: 700;
            cursor: pointer;
            transition: 0.3s;
            text-align: center;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .btn-primary {
            background: var(--bg-dark);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .btn-secondary {
            background: white;
            border: 1px solid #e2e8f0;
            color: #64748b;
        }

        .btn-secondary:hover {
            background: #f8fafc;
        }

        /* --- THE CARD (Mockup) --- */
        .card-container {
            transform: scale(1.6);
            transform-origin: center;
            transition: transform 0.5s ease;
        }

        .business-card,
        .business-card-back {
            width: 3.5in;
            height: 2in;
            background-color: var(--card-bg, #0f172a);
            border-radius: 12px;
            box-shadow: 0 40px 80px rgba(0, 0, 0, 0.25);
            padding: 40px;
            position: relative;
            overflow: hidden;
            display: flex;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .business-card {
            flex-direction: column;
            justify-content: space-between;
        }

        .business-card-back {
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .card-watermark {
            position: absolute;
            right: -40px;
            bottom: -40px;
            width: 220px;
            height: 220px;
            border: 2px solid rgba(255, 255, 255, 0.05);
            border-radius: 50%;
            pointer-events: none;
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 15px;
            z-index: 5;
        }

        .card-logo-container {
            width: 36px;
            height: 36px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card-brand-name {
            font-size: 15px;
            font-weight: 700;
            color: white;
            letter-spacing: 1.5px;
            text-transform: uppercase;
        }

        .card-details {
            text-align: right;
            z-index: 5;
        }

        .card-accent-line {
            width: 30px;
            height: 1.5px;
            background: var(--curr-accent, #0ea5e9);
            margin-left: auto;
            margin-bottom: 10px;
        }

        .user-name {
            font-size: 0.8rem;
            font-weight: 700;
            color: white;
            margin: 0;
            letter-spacing: 0.8px;
        }

        .user-title {
            font-size: 0.5rem;
            font-weight: 500;
            color: #94a3b8;
            margin-top: 1px;
            text-transform: uppercase;
            letter-spacing: 1.2px;
        }

        .user-contact {
            font-size: 0.55rem;
            color: #cbd5e1;
            margin-top: 12px;
            line-height: 1.5;
            font-weight: 300;
            opacity: 0.8;
        }

        /* --- LOGO DEFINITIONS --- */
        .logo-ripple-svg .outer {
            border: 2px solid white;
            border-radius: 50%;
            width: 100%;
            height: 100%;
            position: absolute;
            border-right-color: transparent;
            transform: rotate(-45deg);
        }

        .logo-ripple-svg .inner {
            border: 3px solid #94a3b8;
            border-radius: 50%;
            width: 66%;
            height: 66%;
            position: absolute;
            border-left-color: transparent;
            transform: rotate(-45deg);
        }

        .logo-ripple-svg .core {
            background: #0ea5e9;
            border-radius: 50%;
            width: 28%;
            height: 28%;
            position: absolute;
            box-shadow: 0 0 10px rgba(14, 165, 233, 0.8);
        }



        /* --- THEMES --- */


        .card-brand-name {
            font-family: 'Outfit', sans-serif;
        }

        .user-name,
        .user-title,
        .user-contact {
            font-family: 'Plus Jakarta Sans', sans-serif;
        }

        /* Tab Styling */
        .preview-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.5);
            padding: 5px;
            border-radius: 50px;
            border: 1px solid #cbd5e1;
        }

        .tab-btn {
            padding: 8px 24px;
            border-radius: 50px;
            border: none;
            background: transparent;
            font-size: 0.75rem;
            font-weight: 700;
            color: #64748b;
            cursor: pointer;
            transition: 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .tab-btn.active {
            background: var(--bg-dark);
            color: white;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .preview-content {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .preview-section {
            display: none;
            width: 100%;
            flex-direction: column;
            align-items: center;
        }

        .preview-section.active {
            display: flex;
        }

        /* --- RESPONSIVE --- */

        /* Tablet landscape & small desktop */
        @media (max-width: 1200px) {
            .sidebar {
                width: 340px;
                padding: 2rem;
            }

            .card-container {
                transform: scale(1.3);
            }
        }

        /* Tablet portrait */
        @media (max-width: 1024px) {
            .app-container {
                flex-direction: column;
                overflow-y: auto;
                height: auto;
                min-height: 100vh;
            }

            .sidebar {
                width: 100%;
                height: auto;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
                padding: 2rem;
                order: 2;
            }

            .preview-area {
                padding: 3rem 1.5rem;
                order: 1;
                min-height: 350px;
            }

            .card-container {
                transform: scale(1.2);
            }

            .preview-tabs {
                position: relative;
                top: auto;
                left: auto;
                transform: none;
                margin-bottom: 2rem;
            }

            .actions {
                flex-direction: row;
            }

            .actions .btn {
                flex: 1;
                font-size: 0.8rem;
                padding: 12px;
            }

            .selector-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Large mobile */
        @media (max-width: 768px) {
            .sidebar {
                padding: 1.5rem;
            }

            .preview-area {
                padding: 2.5rem 1rem;
                min-height: 300px;
            }

            .card-container {
                transform: scale(1.0);
            }

            .brand-logo {
                font-size: 1rem;
            }

            .input-group {
                margin-bottom: 1rem;
            }

            input,
            select {
                padding: 10px 12px;
                font-size: 0.85rem;
            }
        }

        /* Small mobile */
        @media (max-width: 480px) {
            .sidebar {
                padding: 1.2rem;
                gap: 1.2rem;
            }

            .preview-area {
                padding: 2rem 0.75rem;
                min-height: 260px;
            }

            .card-container {
                transform: scale(0.82);
            }

            .brand-logo {
                font-size: 0.9rem;
                margin-bottom: 0.5rem;
            }

            .section-title {
                font-size: 0.65rem;
                margin-bottom: 0.75rem;
            }

            .actions {
                flex-direction: column;
            }

            .actions .btn {
                font-size: 0.8rem;
                padding: 12px;
            }

            .preview-tabs {
                gap: 0;
            }

            .tab-btn {
                font-size: 0.65rem;
                padding: 8px 16px;
            }
        }

        /* Very small mobile */
        @media (max-width: 360px) {
            .card-container {
                transform: scale(0.7);
            }

            .preview-area {
                padding: 1.5rem 0.5rem;
                min-height: 220px;
            }
        }

        /* Export overlay responsive */
        @media (max-width: 1024px) {
            #exportOverlay #exportCardContainer {
                transform: scale(2.5) !important;
            }

            #exportOverlay>div:first-child {
                flex-direction: column;
                gap: 10px;
                padding: 12px 16px;
                align-items: flex-start;
            }

            #exportOverlay>div:first-child>div:nth-child(2) {
                font-size: 9px;
                order: 3;
            }
        }

        @media (max-width: 768px) {
            #exportOverlay #exportCardContainer {
                transform: scale(2.0) !important;
            }
        }

        @media (max-width: 480px) {
            #exportOverlay #exportCardContainer {
                transform: scale(1.5) !important;
            }

            #exportOverlay>div:first-child button {
                padding: 6px 12px;
                font-size: 10px;
            }
        }

        @media (max-width: 360px) {
            #exportOverlay #exportCardContainer {
                transform: scale(1.2) !important;
            }
        }

        /* Print hide */
        @media print {

            .sidebar,
            .ui-controls {
                display: none !important;
            }

            body {
                background: white;
            }

            .preview-area {
                background: transparent;
                padding: 0;
            }

            .card-container {
                transform: none !important;
                box-shadow: none !important;
                border: 1px solid #ccc;
            }
        }
    </style>
</head>

<body>

    <div class="app-container">

        <!-- SIDEBAR: Controls -->
        <aside class="sidebar no-print">
            <div class="brand-logo">
                <i class="fas fa-layer-group" style="color: #0ea5e9;"></i>
                <span>Kromia Tech</span>
            </div>

            <div>
                <span class="section-title">Identity Details</span>
                <div class="input-group">
                    <label>Full Name</label>
                    <input type="text" id="in-name" placeholder="John Doe" value="ALEXANDER KROMIA">
                </div>
                <div class="input-group">
                    <label>Job Title</label>
                    <select id="in-title"
                        style="width:100%; padding:10px 14px; border:1px solid #cbd5e1; border-radius:10px; font-size:0.8rem; background:#f8fafc; color:#1e293b; font-family:'Montserrat',sans-serif; appearance:auto; cursor:pointer;">
                        <option value="Founder & Creative Director" selected>Founder & Creative Director</option>
                        <optgroup label="Leadership">
                            <option value="Chief Executive Officer">Chief Executive Officer (CEO)</option>
                            <option value="Chief Technology Officer">Chief Technology Officer (CTO)</option>
                            <option value="Chief Operating Officer">Chief Operating Officer (COO)</option>
                            <option value="Managing Director">Managing Director</option>
                            <option value="Co-Founder">Co-Founder</option>
                        </optgroup>
                        <optgroup label="Creative">
                            <option value="Creative Director">Creative Director</option>
                            <option value="Art Director">Art Director</option>
                            <option value="Head of Design">Head of Design</option>
                            <option value="UI/UX Designer">UI/UX Designer</option>
                            <option value="Senior Designer">Senior Designer</option>
                            <option value="Motion Designer">Motion Designer</option>
                            <option value="Brand Strategist">Brand Strategist</option>
                        </optgroup>
                        <optgroup label="Development">
                            <option value="Lead Developer">Lead Developer</option>
                            <option value="Full Stack Developer">Full Stack Developer</option>
                            <option value="Frontend Developer">Frontend Developer</option>
                            <option value="Backend Developer">Backend Developer</option>
                            <option value="Mobile Developer">Mobile Developer</option>
                            <option value="DevOps Engineer">DevOps Engineer</option>
                        </optgroup>
                        <optgroup label="Management">
                            <option value="Project Manager">Project Manager</option>
                            <option value="Product Manager">Product Manager</option>
                            <option value="Account Manager">Account Manager</option>
                            <option value="Scrum Master">Scrum Master</option>
                        </optgroup>
                        <optgroup label="Marketing & Strategy">
                            <option value="Digital Marketing Manager">Digital Marketing Manager</option>
                            <option value="SEO Specialist">SEO Specialist</option>
                            <option value="Content Strategist">Content Strategist</option>
                            <option value="Social Media Manager">Social Media Manager</option>
                            <option value="Growth Hacker">Growth Hacker</option>
                        </optgroup>
                        <option value="__custom__">✏️ Custom Title...</option>
                    </select>
                    <input type="text" id="in-title-custom" placeholder="Enter custom title..."
                        style="display:none; margin-top:8px;">
                </div>
            </div>

            <div>
                <span class="section-title">Connect</span>
                <div class="input-group">
                    <label>Website</label>
                    <input type="text" id="in-web" placeholder="kromia.tech" value="kromia.tech">
                </div>
                <div class="input-group">
                    <label>Phone / Email (optional)</label>
                    <input type="text" id="in-contact" placeholder="+62 812..." value="+62 812 3456 7890">
                </div>
                <div class="input-group">
                    <label>Address</label>
                    <input type="text" id="in-address" placeholder="Location..." value="Cijeruk, Indonesia">
                </div>
            </div>



            <div class="actions">
                <button class="btn btn-primary" onclick="openExportMode('front')"
                    style="background: linear-gradient(135deg, #3b82f6, #8b5cf6);">
                    <i class="fas fa-expand"></i>
                    Export Mode
                </button>
                <button class="btn btn-secondary" onclick="window.print()">
                    <i class="fas fa-print"></i>
                    Print PDF
                </button>
            </div>
        </aside>

        <!-- PREVIEW AREA -->
        <main class="preview-area">
            <!-- Tabs -->
            <div class="preview-tabs no-print">
                <button class="tab-btn active" onclick="switchTab('front')">Front Side</button>
                <button class="tab-btn" onclick="switchTab('back')">Back Side</button>
            </div>

            <div class="preview-content">
                <!-- Front Section -->
                <div id="section-front" class="preview-section active">
                    <div class="card-container">
                        <div class="business-card theme-ripple" id="businessCard">
                            <div class="card-watermark" id="watermark"></div>

                            <div
                                style="display: flex; width: 100%; height: 100%; align-items: center; justify-content: space-between; position: relative; z-index: 10;">

                                <!-- LEFT: Identity -->
                                <div
                                    style="flex: 0 0 35%; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center;">
                                    <div class="card-logo-container" id="cardLogo"
                                        style="width: 38px; height: 38px; margin-bottom: 14px;">
                                        <div class="logo-ripple-svg"
                                            style="width:100%; height:100%; display:flex; align-items:center; justify-content:center;">
                                            <div class="outer"></div>
                                            <div class="inner"></div>
                                            <div class="core"></div>
                                        </div>
                                    </div>
                                    <div class="card-brand-name"
                                        style="font-size: 10px; letter-spacing: 3px; line-height: 1.5;">
                                        KROMIA<br><span style="font-weight:300; color:var(--curr-accent, #0ea5e9)"
                                            id="preview-gate-text">TECH</span>
                                    </div>
                                </div>

                                <!-- CENTER: Divider -->
                                <div class="card-accent-line" id="accentBar"
                                    style="width: 1px; height: 65%; background: linear-gradient(to bottom, transparent, var(--curr-accent, #0ea5e9), transparent); opacity: 0.4; margin: 0;">
                                </div>

                                <!-- RIGHT: Details -->
                                <div
                                    style="flex: 1; padding-left: 25px; display: flex; flex-direction: column; justify-content: center;">

                                    <div style="margin-bottom: 18px;">
                                        <h3 class="user-name" id="preview-name"
                                            style="font-size: 11px; font-weight: 600; letter-spacing: 2px; margin-bottom: 4px;">
                                            ALEXANDER KROMIA</h3>
                                        <p class="user-title" id="preview-title"
                                            style="font-size: 6.5px; font-weight: 400; letter-spacing: 2.5px; color: var(--curr-accent, #0ea5e9); opacity: 0.8; margin: 0;">
                                            FOUNDER & CREATIVE DIRECTOR</p>
                                    </div>

                                    <div class="contact-info" style="display: flex; flex-direction: column; gap: 7px;">
                                        <div
                                            style="display: flex; align-items: center; gap: 8px; color: #94a3b8; font-size: 7px; font-weight: 300; letter-spacing: 0.5px;">
                                            <svg width="8" height="8" viewBox="0 0 512 512"
                                                fill="var(--curr-accent, #0ea5e9)" style="flex-shrink:0;">
                                                <path
                                                    d="M164.9 24.6c-7.7-18.6-28-28.5-47.4-23.2l-88 24C12.1 30.2 0 46 0 64C0 311.4 200.6 512 448 512c18 0 33.8-12.1 38.6-29.5l24-88c5.3-19.4-4.6-39.7-23.2-47.4l-96-40c-16.3-6.8-35.2-2.1-46.3 11.6L304.7 368C234.3 334.7 177.3 277.7 144 207.3L193.3 167c13.7-11.2 18.4-30 11.6-46.3l-40-96z" />
                                            </svg>
                                            <span id="preview-contact">+62 812 3456 7890</span>
                                        </div>
                                        <div
                                            style="display: flex; align-items: center; gap: 8px; color: #94a3b8; font-size: 7px; font-weight: 300; letter-spacing: 0.5px;">
                                            <svg width="8" height="8" viewBox="0 0 512 512"
                                                fill="var(--curr-accent, #0ea5e9)" style="flex-shrink:0;">
                                                <path
                                                    d="M352 256c0 22.2-1.2 43.6-3.3 64H163.3c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64H348.7c2.2 20.4 3.3 41.8 3.3 64zm28.8-64H503.9c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6c78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7c10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5c11.6 26 20.9 58.2 27 94.7zm-209 0H18.6C48.6 85.9 112.2 29.1 190.6 8.4C165.1 42.6 145.3 96.1 135.3 160zM8.1 192H131.2c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zM194.7 446.6c-11.6-26-20.9-58.2-27-94.6H344.3c-6.1 36.4-15.5 68.6-27 94.6c-10.5 23.6-22.2 40.7-33.5 51.5C272.6 508.8 263.3 512 256 512s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6C112.2 482.9 48.6 426.1 18.6 352H135.3zm245.1 0H493.4c-29.9 74.1-93.6 130.9-171.9 151.6c25.5-34.2 45.2-87.7 55.3-151.6z" />
                                            </svg>
                                            <span id="preview-web">kromia.tech</span>
                                        </div>
                                        <div
                                            style="display: flex; align-items: center; gap: 8px; color: #94a3b8; font-size: 7px; font-weight: 300; letter-spacing: 0.5px;">
                                            <svg width="8" height="8" viewBox="0 0 384 512"
                                                fill="var(--curr-accent, #0ea5e9)" style="flex-shrink:0;">
                                                <path
                                                    d="M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z" />
                                            </svg>
                                            <span id="preview-address">Cijeruk, Indonesia</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Back Section -->
                <div id="section-back" class="preview-section">
                    <div class="card-container">
                        <div class="business-card-back theme-ripple" id="businessCardBack">
                            <!-- Large Subtle Watermark in Center -->
                            <div class="card-watermark" id="watermarkBack"
                                style="width: 320px; height: 320px; left: 50%; top: 50%; transform: translate(-50%, -50%); opacity: 0.04;">
                            </div>

                            <!-- Top-Left: Brand Identity -->
                            <div
                                style="position: absolute; top: 35px; left: 35px; z-index: 10; display: flex; align-items: center; gap: 12px;">
                                <div class="card-logo-container" id="cardLogoBack" style="width: 38px; height: 38px;">
                                    <!-- Default: Ripple (JS will update) -->
                                    <div class="logo-ripple-svg"
                                        style="width:100%; height:100%; display:flex; align-items:center; justify-content:center;">
                                        <div class="outer" style="border-width: 1.5px;"></div>
                                        <div class="inner" style="border-width: 2px;"></div>
                                        <div class="core" style="width: 25%; height: 25%;"></div>
                                    </div>
                                </div>
                                <div style="display: flex; flex-direction: column;">
                                    <div class="card-brand-name"
                                        style="font-size: 10px; letter-spacing: 2.5px; font-weight: 600;">
                                        KROMIA<br><span style="font-weight:300; color:var(--curr-accent, #0ea5e9)"
                                            id="back-gate-text">TECH</span>
                                    </div>
                                    <div
                                        style="width: 20px; height: 1px; background: var(--curr-accent, #0ea5e9); margin-top: 5px; opacity: 0.6;">
                                    </div>
                                </div>
                            </div>

                            <!-- Bottom-Right: QR + URL -->
                            <div
                                style="position: absolute; bottom: 35px; right: 35px; z-index: 10; display: flex; flex-direction: column; align-items: flex-end; gap: 8px;">
                                <canvas id="qrCanvas" style="width: 38px; height: 38px; border-radius: 2px;"></canvas>
                                <p id="qrUrlLabel"
                                    style="font-size: 5px; letter-spacing: 0.8px; color: #64748b; font-weight: 400; margin: 0; text-transform: lowercase;">
                                    kromia.tech</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Hidden SVG Defs -->
            <svg style="width:0;height:0;position:absolute;">
                <defs>
                    <linearGradient id="silverGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#F8FAFC;stop-opacity:1" />
                        <stop offset="50%" style="stop-color:#94A3B8;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#E2E8F0;stop-opacity:1" />
                    </linearGradient>
                </defs>
            </svg>
        </main>
    </div>

    <!-- Export Mode Overlay -->
    <!-- Export Mode Overlay -->
    <div id="exportOverlay"
        style="display:none; position:fixed; inset:0; z-index:9999; background:rgba(0,0,0,0.95); flex-direction:column; align-items:center; justify-content:center; backdrop-filter:blur(5px);">

        <!-- Top Bar -->
        <div
            style="position:absolute; top:0; left:0; right:0; padding:20px 30px; display:flex; justify-content:space-between; align-items:center; z-index:10;">
            <div style="display:flex; gap:10px;">
                <button id="expFrontBtn" onclick="switchExport('front')"
                    style="padding:8px 20px; border:1px solid #475569; border-radius:8px; background:#1e293b; color:#e2e8f0; font-family:'Montserrat',sans-serif; font-size:12px; cursor:pointer; letter-spacing:1px; font-weight:600; transition:0.2s;">FRONT</button>
                <button id="expBackBtn" onclick="switchExport('back')"
                    style="padding:8px 20px; border:1px solid #475569; border-radius:8px; background:transparent; color:#64748b; font-family:'Montserrat',sans-serif; font-size:12px; cursor:pointer; letter-spacing:1px; font-weight:600; transition:0.2s;">BACK</button>
            </div>

            <div style="display:flex; gap:12px;">
                <button id="downloadBtn" onclick="triggerDownload()"
                    style="padding:10px 24px; border:none; border-radius:8px; background:white; color:black; font-family:'Montserrat',sans-serif; font-size:12px; cursor:pointer; font-weight:700; display:flex; align-items:center; gap:8px; box-shadow:0 0 15px rgba(255,255,255,0.1);">
                    <i class="fas fa-download"></i> SAVE IMAGE
                </button>
                <button onclick="closeExportMode()"
                    style="padding:10px 16px; border:1px solid #475569; border-radius:8px; background:transparent; color:#94a3b8; font-family:'Montserrat',sans-serif; font-size:12px; cursor:pointer; transition:0.2s;">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>

        <!-- Scaled Card Container -->
        <!-- We add a wrapper to center it perfectly -->
        <div style="flex:1; display:flex; align-items:center; justify-content:center; width:100%; overflow:hidden;">
            <div id="exportCardContainer" style="transform: scale(1); box-shadow: 0 20px 50px rgba(0,0,0,0.5);">
                <!-- Card clone will be injected here -->
            </div>
        </div>

        <!-- Bottom Info -->
        <div
            style="position:absolute; bottom:25px; color:#475569; font-size:11px; font-family:'Montserrat',sans-serif; letter-spacing:0.5px; text-align:center;">
            High-Fidelity Rendering Mode · {html-to-image} Engine<br>
            <span style="opacity:0.5">Note: If shadows look clipped, try saving again.</span>
        </div>
    </div>

    <!-- Logic -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html-to-image/1.11.11/html-to-image.min.js"></script>
    <script>
        // DOM Elements
        const inputs = {
            name: document.getElementById('in-name'),
            title: document.getElementById('in-title'),
            web: document.getElementById('in-web'),
            contact: document.getElementById('in-contact'),
            address: document.getElementById('in-address')
        };

        const previews = {
            name: document.getElementById('preview-name'),
            title: document.getElementById('preview-title'),
            web: document.getElementById('preview-web'),
            contact: document.getElementById('preview-contact'),
            address: document.getElementById('preview-address')
        };

        const card = document.getElementById('businessCard');
        const cardBack = document.getElementById('businessCardBack');
        const logoContainer = document.getElementById('cardLogo');
        const logoContainerBack = document.getElementById('cardLogoBack');
        const watermark = document.getElementById('watermark');
        const watermarkBack = document.getElementById('watermarkBack');
        const backGateText = document.getElementById('back-gate-text');

        // Global state for current export side
        let currentExportSide = 'front';

        // Real-time Update Logic
        function updatePreview() {
            previews.name.textContent = inputs.name.value || "YOUR NAME";
            previews.web.textContent = inputs.web.value || "website.com";
            previews.contact.textContent = inputs.contact.value;
            previews.address.textContent = inputs.address.value;

            // Title: from select or custom input
            const titleSelect = inputs.title;
            const customInput = document.getElementById('in-title-custom');
            if (titleSelect.value === '__custom__') {
                previews.title.textContent = customInput.value || "JOB TITLE";
            } else {
                previews.title.textContent = titleSelect.value || "JOB TITLE";
            }
        }

        // Handle title select change
        inputs.title.addEventListener('change', function () {
            const customInput = document.getElementById('in-title-custom');
            if (this.value === '__custom__') {
                customInput.style.display = 'block';
                customInput.focus();
            } else {
                customInput.style.display = 'none';
            }
            updatePreview();
        });

        document.getElementById('in-title-custom').addEventListener('input', updatePreview);

        Object.values(inputs).forEach(input => {
            if (input.id !== 'in-title') {
                input.addEventListener('input', updatePreview);
            }
        });

        // Tab Logic
        function switchTab(side) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.preview-section').forEach(sec => sec.classList.remove('active'));

            event.target.classList.add('active');
            document.getElementById(`section-${side}`).classList.add('active');
        }

        // Theme / Logo Switching
        const selectBtns = document.querySelectorAll('.select-btn');

        selectBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                selectBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                setTheme(btn.dataset.type);
            });
        });

        function setTheme(type) {
            card.className = "business-card"; // Reset
            cardBack.className = "business-card-back";
            logoContainer.innerHTML = '';
            logoContainerBack.innerHTML = '';

            if (type === 'ripple') {
                card.classList.add('theme-ripple');
                cardBack.classList.add('theme-ripple');
                const darkBg = '#020617';
                const goldAccent = '#0ea5e9';
                card.style.setProperty('--card-bg', darkBg);
                cardBack.style.setProperty('--card-bg', darkBg);
                card.style.setProperty('--curr-accent', goldAccent);
                cardBack.style.setProperty('--curr-accent', goldAccent);

                const rippleHtml = `
                    <div class="logo-ripple-svg" style="width:100%; height:100%; display:flex; align-items:center; justify-content:center;">
                        <div class="outer"></div>
                        <div class="inner"></div>
                        <div class="core"></div>
                    </div>`;
                const rippleHtmlBack = `
                    <div class="logo-ripple-svg" style="width:100%; height:100%; display:flex; align-items:center; justify-content:center;">
                        <div class="outer" style="border-width: 3px;"></div>
                        <div class="inner" style="border-width: 4px;"></div>
                        <div class="core" style="width: 30%; height: 30%;"></div>
                    </div>`;

                logoContainer.innerHTML = rippleHtml;
                logoContainerBack.innerHTML = rippleHtmlBack;

                watermark.style.borderRadius = '50%';
                watermarkBack.style.borderRadius = '50%';
                watermark.style.transform = 'rotate(0deg)';
                watermarkBack.style.transform = 'rotate(0deg)';
                watermark.style.bottom = '-40px'; watermark.style.right = '-40px';
                watermark.style.borderColor = 'rgba(255,255,255,0.05)';
                watermarkBack.style.borderColor = 'rgba(255,255,255,0.05)';
                backGateText.style.color = goldAccent;
            }
        }

        // QR Code Generation
        function generateQR() {
            const rawUrl = inputs.web.value || 'https://kromia.tech';
            const fullUrl = rawUrl.startsWith('http') ? rawUrl : 'https://' + rawUrl;

            // Check if QRious is loaded
            if (typeof QRious !== 'undefined') {
                const qr = new QRious({
                    element: document.getElementById('qrCanvas'),
                    value: fullUrl,
                    size: 260,
                    foreground: '#ffffff',
                    background: 'transparent',
                    level: 'M'
                });
            }

            // Update URL label
            const cleanUrl = rawUrl.replace(/^https?:\/\//, '').replace(/^www\./, '');
            document.getElementById('qrUrlLabel').textContent = cleanUrl;
        }

        inputs.web.addEventListener('input', generateQR);
        window.addEventListener('load', generateQR);

        // ======= EXPORT MODE =======
        function openExportMode(side) {
            const overlay = document.getElementById('exportOverlay');
            overlay.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            switchExport(side || 'front');
        }

        function closeExportMode() {
            document.getElementById('exportOverlay').style.display = 'none';
            document.body.style.overflow = '';
        }

        function switchExport(side) {
            currentExportSide = side;
            const container = document.getElementById('exportCardContainer');
            const frontBtn = document.getElementById('expFrontBtn');
            const backBtn = document.getElementById('expBackBtn');

            // Clone the appropriate card
            const sourceId = side === 'front' ? 'businessCard' : 'businessCardBack';
            const source = document.getElementById(sourceId);

            // We clone carefully to preserve styles
            const clone = source.cloneNode(true);
            clone.id = 'exportTarget'; // Specific ID for targeting
            clone.style.transform = 'none'; // Reset any scaling
            clone.style.margin = '0';

            // Ensure clone is visible and has dimension
            clone.style.width = '350px'; // Force dimensions to match CSS
            clone.style.height = '200px';

            container.innerHTML = '';
            container.appendChild(clone);

            // If back side has QR canvas, we must manually copy the canvas content
            if (side === 'back') {
                const clonedCanvas = clone.querySelector('canvas');
                const originalCanvas = document.getElementById('qrCanvas');
                if (clonedCanvas && originalCanvas) {
                    const ctx = clonedCanvas.getContext('2d');
                    clonedCanvas.width = originalCanvas.width;
                    clonedCanvas.height = originalCanvas.height;
                    clonedCanvas.style.width = '38px'; // Ensure CSS size is kept
                    clonedCanvas.style.height = '38px';
                    ctx.drawImage(originalCanvas, 0, 0);
                }
            }

            // Button active state
            frontBtn.style.background = side === 'front' ? '#1e293b' : 'transparent';
            frontBtn.style.color = side === 'front' ? '#e2e8f0' : '#64748b';
            backBtn.style.background = side === 'back' ? '#1e293b' : 'transparent';
            backBtn.style.color = side === 'back' ? '#e2e8f0' : '#64748b';
        }

        function triggerDownload() {
            const node = document.getElementById('exportTarget');
            const btn = document.getElementById('downloadBtn');
            const originalContent = btn.innerHTML;

            btn.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i> GENERATING...';
            btn.disabled = true;

            const scale = 3; // 3x scale for high resolution (approx 1050x600)

            htmlToImage.toPng(node, {
                quality: 1.0,
                pixelRatio: scale,
                style: {
                    transform: 'none', // Ensure no transforms messing up positioning
                    boxShadow: 'none',
                    margin: 0
                }
            })
                .then(function (dataUrl) {
                    const link = document.createElement('a');
                    link.download = `AtlanticGate_${currentExportSide}_${inputs.name.value.replace(/\s+/g, '_')}.png`;
                    link.href = dataUrl;
                    link.click();

                    btn.innerHTML = originalContent;
                    btn.disabled = false;
                })
                .catch(function (error) {
                    console.error('oops, something went wrong!', error);
                    alert('Export failed. Please try again.');
                    btn.innerHTML = originalContent;
                    btn.disabled = false;
                });
        }

        // Close on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeExportMode();
        });
    </script>
</body>

</html>